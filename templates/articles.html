{% extends "base.html" %}

{% block title %}Articles{% endblock %}

{% block content %}
    <form id='token' action="/{{ token }}">
        Choose your language:
        <select id="language" name="language">
            <option value="en">English</option>
            <option value="zh">Chinese</option>
            <option value="ko">Korean</option>
            <option value="lo">Lao</option>
            <option value="tl">Tagalog</option>
            <option value="th">Thai</option>
            <option value="vi">Vietnamese</option>
        </select>
        <input type='hidden' value='balloonicornsayshi' name="secret">

        <input type="submit">
    </form>
    <br>
    <div class='container'>
        {% for link, heading, description in articles_links %}
        <a href= {{ link }}>
            <strong>{{ heading }}</strong>
            <p>{{ description }}</p>
        </a>
        <form class='save_article'>
            <input type="hidden" name="save_article_heading" value= "{{ heading }}"> 
            <input type="hidden" name="save_article_description" value= "{{ description }}"> 
            <input type="hidden" name="save_article_url" value= "{{ link }}">
            <input type="submit" name="save_article_submit_btn" value="Save"> 
        </form>
        <br>
        <form class='share_article' action='/share_article'>
            <input type="submit" value="Share">
            <input type=text name="phone_number" placeholder="Phone Number">
            <input type="hidden" name="heading" value= "{{ heading }}"> 
            <input type="hidden" name="description" value= "{{ description }}"> 
            <input type="hidden" name="url" value= "{{ link }}"> 
        </form>
        <br>
        {% endfor %}
    </div>

{% endblock %}

{% block jscript %}
<script src="http://code.jquery.com/jquery.js"></script>
<script>

$('.save_article').on('submit',function(evt) {
    evt.preventDefault();
    let url = '/save_article';
    let article_heading = $(this).find('input[name="save_article_heading"]').val();
    let article_url = $(this).find('input[name="save_article_url"]').val();
    let formData = {'heading': article_heading,'url': article_url};
    $.get(url, formData, () => {
        $(this).find('input[name="save_article_submit_btn"]').fadeOut();
    });
});

</script>

{% endblock %}